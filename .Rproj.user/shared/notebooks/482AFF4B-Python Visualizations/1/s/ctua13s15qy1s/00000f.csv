"0","def create_sentiment_visualization():"
"0","    """"""Create time series visualization of sentiment scores using existing dataframes."""""""
"0","    print(""Creating sentiment visualization..."")"
"0","    "
"0","    # Create a figure"
"0","    plt.figure(figsize=(15, 8))"
"0","    "
"0","    # Helper function to calculate monthly sentiment averages"
"0","    def calculate_monthly_sentiment(df):"
"0","        df['Date'] = pd.to_datetime(df['Date'])"
"0","        # Filter for the date range"
"0","        df = df[(df['Date'] >= '1982-01-01') & (df['Date'] <= '1987-01-01')]"
"0","        return df.groupby(pd.Grouper(key='Date', freq='ME'))['SentimentScore'].mean().reset_index()"
"0","    "
"0","    # Get monthly averages for each dataset"
"0","    monthly_sentiment_dataset1 = calculate_monthly_sentiment(dataset1_comments)"
"0","    monthly_sentiment_dataset3 = calculate_monthly_sentiment(dataset2_comments)"
"0","    monthly_sentiment_influential = calculate_monthly_sentiment(dataset3_comments_onlyinfluential)"
"0","    "
"0","    # Plot the lines"
"0","    plt.plot(monthly_sentiment_dataset1['Date'], "
"0","             monthly_sentiment_dataset1['SentimentScore'],"
"0","             label='Dataset One', linewidth=2, color='#1f77b4')"
"0","    plt.plot(monthly_sentiment_dataset3['Date'],"
"0","             monthly_sentiment_dataset3['SentimentScore'],"
"0","             label='Dataset Three', linewidth=2, color='#ff7f0e')"
"0","    plt.plot(monthly_sentiment_influential['Date'],"
"0","             monthly_sentiment_influential['SentimentScore'],"
"0","             label='Influential Authors', linewidth=2, color='#2ca02c')"
"0","    "
"0","    # Add key events annotations"
"0","    key_events = {"
"0","        '1982-05-11': ""Term 'AIDS' Introduced"","
"0","        '1983-09-30': ""CDC AIDS Guidelines"","
"0","        '1984-04-23': ""HHS HIV/AIDS"","
"0","        '1984-10-01': ""First HIV Blood Test"","
"0","        '1985-03-02': ""First HIV Test Approved"","
"0","        '1985-07-25': ""Rock Hudson's Diagnosis"","
"0","        '1985-10-02': ""HIV Transmission Routes"","
"0","        '1986-02-01': ""'HIV' Renamed"","
"0","        '1986-08-14': ""AZT Approved"""
"0","    }"
"0","    "
"0","    # Add event annotations"
"0","    y_min = plt.ylim()[0]"
"0","    for date, event in key_events.items():"
"0","        date_obj = pd.to_datetime(date)"
"0","        plt.axvline(x=date_obj, color='gray', linestyle='--', alpha=0.5)"
"0","        plt.text(date_obj, y_min, event,"
"0","                 rotation=90, verticalalignment='bottom',"
"0","                 horizontalalignment='right', fontsize=8)"
"0","    "
"0","    # Customize plot"
"0","    plt.title('Time Series of Average Sentiment Scores Over Time (1982â€“1987)', fontsize=14, pad=20)"
"0","    plt.xlabel('Month', fontsize=12)"
"0","    plt.ylabel('Average Sentiment Score', fontsize=12)"
"0","    plt.grid(True, alpha=0.3)"
"0","    plt.legend(loc='upper center', bbox_to_anchor=(0.5, -0.15),"
"0","               ncol=3, frameon=False)"
"0","    plt.gca().set_facecolor('white')"
"0","    plt.gcf().set_facecolor('white')"
"0","    plt.xticks(rotation=45)"
"0","    plt.tight_layout()"
"0","    "
"0","    # Ensure output directory exists"
"0","    images_dir = os.path.join(output_directory, ""Images and Tables/Images"")"
"0","    os.makedirs(images_dir, exist_ok=True)"
"0","    "
"0","    # Save the plot"
"0","    output_path = os.path.join(images_dir, ""sentiment_time_series.png"")"
"0","    plt.savefig(output_path, dpi=300, bbox_inches='tight', facecolor='white')"
"0","    plt.close()"
"0","    "
"0","    print(f""Visualization saved to: {output_path}"")"
"0","    return monthly_sentiment_dataset1, monthly_sentiment_dataset3, monthly_sentiment_influential"
"0","    "
"0","# Run the analysis"
"0","try:"
"0","    print(""\nStarting sentiment analysis..."")"
"0","    results = create_sentiment_visualization()"
"0","    print(""\nAnalysis completed successfully!"")"
"0","    "
"0","    # Print summary statistics"
"0","    print(""\nSentiment Statistics:"")"
"0","    for name, data in zip(['Dataset One', 'Dataset Three', 'Influential Authors'], results):"
"0","        print(f""\n{name}:"")"
"0","        print(f""Average sentiment: {data['SentimentScore'].mean():.3f}"")"
"0","        print(f""Number of months: {len(data)}"")"
"0","        "
"0","except Exception as e:"
"0","    print(f""An error occurred: {str(e)}"")"
"0",""
"1","
Starting sentiment analysis...
Creating sentiment visualization...
"
"1","Visualization saved to: /Users/emerson/Github/usenet_webpage/Images and Tables/Images/sentiment_time_series.png

Analysis completed successfully!

Sentiment Statistics:

Dataset One:
Average sentiment: 0.732
Number of months: 59

Dataset Three:
Average sentiment: -2.964
Number of months: 47

Influential Authors:
Average sentiment: -5.750
Number of months: 33
"
