"0","# Load required libraries"
"0","library(tm)"
"0",""
"0","# Data preparation: Select relevant text data"
"0","comments_corpus <- Corpus(VectorSource(filtered_comments$Full.Text))  # Replace 'Full.Text' with the actual column name containing text data"
"0",""
"0","# Text preprocessing"
"0","comments_corpus <- comments_corpus %>%"
"0","  tm_map(content_transformer(tolower)) %>%                   # Convert text to lowercase"
"0","  tm_map(content_transformer(function(x) gsub(""[^[:alnum:] ]"", "" "", x))) %>%  # Remove non-alphanumeric characters"
"0","  tm_map(removePunctuation) %>%                               # Remove punctuation"
"0","  tm_map(removeNumbers) %>%                                   # Remove numbers"
"0","  tm_map(removeWords, stopwords(""english"")) %>%               # Remove common stop words"
"0","  # tm_map(stemDocument) %>%                                  # Perform stemming (optional)"
"0","  tm_map(stripWhitespace)                                     # Strip whitespace"
"2","Warning in tm_map.SimpleCorpus(., content_transformer(tolower)) :"
"2","
 "
"2"," transformation drops documents
"
"2","Warning in tm_map.SimpleCorpus(., content_transformer(function(x) gsub(""[^[:alnum:] ]"",  :"
"2","
 "
"2"," transformation drops documents
"
"2","Warning in tm_map.SimpleCorpus(., removePunctuation) :"
"2","
 "
"2"," transformation drops documents
"
"2","Warning in tm_map.SimpleCorpus(., removeNumbers) :"
"2","
 "
"2"," transformation drops documents
"
"2","Warning in tm_map.SimpleCorpus(., removeWords, stopwords(""english"")) :"
"2","
 "
"2"," transformation drops documents
"
"2","Warning in tm_map.SimpleCorpus(., stripWhitespace) :"
"2","
 "
"2"," transformation drops documents
"
"0","# Create Document-Term Matrix (DTM)"
"0","dtm <- DocumentTermMatrix(comments_corpus)"
"0",""
"0","# Remove sparse terms to reduce the size of DTM"
"0","dtm <- removeSparseTerms(dtm, 0.90)  # Adjust sparsity threshold if necessary"
"0",""
"0","# Check for rows with all zero entries and remove them"
"0","row_totals <- apply(dtm, 1, sum)"
"0","dtm <- dtm[row_totals > 0, ]"
