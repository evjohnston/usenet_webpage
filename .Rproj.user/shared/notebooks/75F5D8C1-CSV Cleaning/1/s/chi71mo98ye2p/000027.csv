"0","# Map newsgroups to IDs"
"0","newsgroup_ids <- c(""netmed"" = ""NG01"", ""netmotss"" = ""NG02"", ""netnews"" = ""NG03"","
"0","                   ""netpolitics"" = ""NG04"", ""netreligion"" = ""NG05"", ""netsingles"" = ""NG06"")"
"0",""
"0","# Threads cleaning"
"0","all_threads <- all_threads %>%"
"0","  mutate(NG_ID = factor(newsgroup, levels = names(newsgroup_ids), labels = newsgroup_ids),"
"0","         NG_TH_ID = paste(NG_ID, ThreadID, sep = ""_"")) %>%"
"0","  rename(TH_ID = ThreadID) %>%"
"0","  select(NG_TH_ID, TH_ID, NG_ID, everything()) %>%"
"0","  mutate(Date = as.Date(Date, format = ""%m/%d/%y""))"
"0",""
"0","# Comments cleaning"
"0","all_comments <- all_comments %>%"
"0","    rename(        "
"0","        TH_CM_ID = Unique.Comment.ID,"
"0","        TH_ID = Thread.ID,"
"0","        CM_ID = Comment.ID) %>%"
"0","  mutate(NG_ID = factor(newsgroup, levels = names(newsgroup_ids), labels = newsgroup_ids),"
"0","         NG_TH_CM_ID = paste(NG_ID, TH_CM_ID, sep = ""_""),"
"0","         NG_TH_ID = paste(NG_ID, TH_ID, sep = ""_"")) %>%"
"0","  select(NG_TH_CM_ID, NG_TH_ID, TH_CM_ID, CM_ID, TH_ID, NG_ID, everything()) %>%"
"0","  mutate(Date.and.Time = as.POSIXct(gsub(""[^[:alnum:] [:punct:]]"", """", Date.and.Time), format = ""%b %d, %Y, %I:%M:%S%p""),"
"0","         Hour = as.numeric(format(Date.and.Time, ""%H"")),"
"0","         Date = as.Date(Date.and.Time))"
"0",""
"0","# Add sentiment scores"
"0","all_comments <- all_comments %>%"
"0","  mutate(SentimentScore = get_sentiment(Full.Text, method = ""afinn""))"
"0",""
"0","all_comments <- all_comments %>%"
"0","  mutate("
"0","    Author = case_when("
"0","      Author == ""Cowenton Volunteer Fire Department"" ~ ""Ron Natalie"","
"0","      TRUE ~ Author"
"0","    )"
"0","  )"
"0",""
"0","write.csv(all_threads, file.path(threads_directory, ""dataset1_threads.csv""), row.names = FALSE)"
"0","write.csv(all_comments, file.path(comments_directory, ""dataset1_comments.csv""), row.names = FALSE)"
