"0","import pandas as pd"
"0","import matplotlib.pyplot as plt"
"0","import seaborn as sns"
"0",""
"0","# Get the top 25 authors by the number of comments"
"0","top_authors = all_comments['Author'].value_counts().head(25).index"
"0",""
"0","# Filter the dataset to include only the top 25 authors"
"0","top_authors_data = all_comments[all_comments['Author'].isin(top_authors)]"
"0",""
"0","# Calculate the number of comments by each of the top 25 authors in each newsgroup"
"0","comments_per_newsgroup = top_authors_data.groupby(['Author', 'newsgroup']).size().unstack(fill_value=0)"
"0",""
"0","# Sort authors by total number of comments in descending order"
"0","comments_per_newsgroup['Total Comments'] = comments_per_newsgroup.sum(axis=1)"
"0","comments_per_newsgroup = comments_per_newsgroup.sort_values('Total Comments', ascending=True)"
"0",""
"0","# Remove the 'Total Comments' column for plotting"
"0","comments_per_newsgroup = comments_per_newsgroup.drop(columns='Total Comments')"
"0",""
"0","# Define a distinct color palette for newsgroups"
"0","distinct_colors = sns.color_palette('tab20', len(comments_per_newsgroup.columns))"
"0",""
"0","# Plot a stacked bar plot without white lines between colors and with distinct colors"
"0","comments_per_newsgroup.plot(kind='barh', stacked=True, figsize=(12, 8), color=distinct_colors, edgecolor='none')"
"1","<Axes: ylabel='Author'>
"
"0","plt.title('Top 25 Most Active Users by Newsgroup')"
"0","plt.xlabel('Number of Comments')"
"1","Text(0.5, 1.0, 'Top 25 Most Active Users by Newsgroup')
"
"1","Text(0.5, 0, 'Number of Comments')
"
"0","plt.ylabel('Author')"
"0","plt.legend(title='Newsgroup', bbox_to_anchor=(1.05, 1), loc='upper left')"
"1","Text(0, 0.5, 'Author')
"
"1","<matplotlib.legend.Legend object at 0x30ca032c0>
"
"0","plt.tight_layout()"
"0",""
"0","# Save the figure"
"0","plt.savefig(os.path.join(output_directory, ""images and tables/top_25_most_active_users_by_newsgroup.png""))"
"0","plt.show()"
"0",""
